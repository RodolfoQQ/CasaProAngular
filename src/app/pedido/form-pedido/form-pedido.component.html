<div class="container">
    <div class="d-flex my-5 grupo-buscar-cliente">
        <div class="">
            <div>
                <mat-form-field class="mat-form-field">
                    <mat-label>Cliente</mat-label>
                    <div class="d-flex">
                        <input matInput [(ngModel)]="rucODni" name="rucODni" type="text" placeholder=" RUC del Cliente">
                        <button class=" custon-btn-buscar" (click)="findCliente()" type="submit">
                            <mat-icon>search</mat-icon>
                        </button>
                    </div>
                </mat-form-field>

                <form action="">
                    <div class="">
                        <mat-form-field>
                            <mat-label>Productos</mat-label>
                            <input type="text" placeholder="Nombre del producto" matInput
                                [formControl]="autocompleteControl" [matAutocomplete]="auto">
                            <mat-autocomplete #auto="matAutocomplete" [displayWith]="mostrarnombre"
                                (optionSelected)="selectedProducto($event)">

                                @for (productos of productosFiltrados | async; track productos) {
                                <mat-option [value]="productos">{{productos.nombreProducto}}</mat-option>
                                }

                            </mat-autocomplete>
                        </mat-form-field>
                    </div>
                </form>
            </div>
            <div>
                <div class="container card p-2">

                    <button mat-stroked-button color="primary" type="button" name="selecciondeenvio" id="entrega1"
                        (click)="habilitarDireccion = (habilitarDireccion==false)? true:false;">{{habilitarDireccion==true?'Entrega
                        a domicilio':'Entrega en tienda'}}
                        <mat-icon>car</mat-icon>
                    </button>

                    <div class=" my-2" *ngIf="habilitarDireccion==true">
                        <div class="my-2">
                            <div><input class="form-control" type="text" placeholder="ingresa direccion a enviar">
                            </div>
                            <div class="my-4 ">
                                <input class="form-control" type="text" placeholder="Distrito">
                            </div>

                        </div>
                        <div class="my-4">
                            <input class="form-control" type="text" placeholder="Teleofno de referencia">
                        </div>
                        <div class="my-4">
                            <input class="form-control" type="text" placeholder="Persona que recepciona">
                        </div>
                        <div class="my-4">
                            <input class="form-control" type="text" placeholder="Parentesco">
                        </div>


                    </div>
                    <div class="" *ngIf="habilitarDireccion==false">
                        <input class="form-control" type="text" placeholder=" Recojo en tienda con tiket o boleta "
                            disabled>

                    </div>
                </div>
            </div>
        </div>

        <div>
            <div class="card mx-5 ">
                <ng-container *ngIf="clienteCod>0; else elseTemplate">
                    <div class="alert alert-success fomr-group d-flex">
                        <input disabled class="formControl" [value]="clienteCod" name="nombre" type="text"
                            placeholder="empresa">
                        <input disabled class="form-control" [value]="nombreCliente" type="text">
                        <button (click)="opendialogSendToAdrees()" mat-button>
                            <mat-icon> local_shipping</mat-icon>
                        </button>
                    </div>
                </ng-container>
                <ng-template #elseTemplate>
                    <div class="alert alert-danger">No se agrego ningun cliente</div>
                </ng-template>



                <table class="table table-hover ">
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Categoria</th>
                            <th>descripcion</th>
                            <th>cant.mayor</th>
                            <th>Sub total</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (item of pedidoFactura.rowPedidos; track $index) {
                        <tr>
                            <td>{{item.producto.nombreProducto}}</td>
                            <td>{{item.producto.categoria.nombrCategoria}}</td>
                            <td>{{item.producto.descripcion}}</td>
                            <td colspan="2">
                                <div class="col-sm-5">
                                    <input type="number" class="form-control" [(ngModel)]="item.cantidad"
                                        name="cantidadPorMayor" min="1" [value]="item.cantidad">
                                </div>

                            </td>

                            <td>
                                <button mat-icon-button color="warn" class="mat-icon-button-sm" (click)="deletedRow(item.producto.nombreProducto)">
                                    <mat-icon>deleted</mat-icon>
                                </button>
                            </td>
                        </tr>
                        }

                    </tbody>
                </table>
                <div class="d-flex justify-content-end ">
                    <div class="card m-2 p-2">
                        <div class="d-flex">
                            Total: <span>1586</span>
                        </div>
                        <button mat-icon-button>
                            <mat-icon class="mat-icon-lg">save</mat-icon>
                        </button>

                    </div>
                </div>
            </div>
        </div>

    </div>








</div>